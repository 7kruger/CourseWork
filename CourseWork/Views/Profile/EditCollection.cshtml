@using CourseWork.Models.Entities
@{
	ViewData["Title"] = "Редактирование коллекции";
}
@model CourseWork.Models.ViewModels.EditCollectionViewModel

<h1 class="text-center">Редактирование коллекции</h1>
<div class="container text-center">
	<form asp-action="EditCollection" asp-controller="Profile" method="post">
		<div class="container text-center custom-group-form">
			<input type="hidden" id="collectionId" value="@Model.Id" />

			<div class="form-group">
				<label asp-for="Name">Название коллекции</label><br />
				<input class="form-control" asp-for="Name" placeholder="Название коллекции" />
				<span asp-validation-for="Name" />
			</div>

			<div class="form-group">
				<label asp-for="Description">Описание коллекции</label><br />
				<textarea class="form-control" asp-for="Description"></textarea>
				<span asp-validation-for="Description" />
			</div>

			<div class="form-group">
				<label asp-for="Theme">Тема коллекции</label><br />
				<select class="form-control" asp-for="Theme">
					<option value="Books">Books</option>
					<option value="Signs">Signs</option>
					<option value="Silverware">Silverware</option>
					<option value="Pictures">Pictures</option>
					<option value="Coins">Coins</option>
					<option value="Other">Other</option>
				</select>
				<span asp-validation-for="Theme" />
			</div><br><br>
		</div>

		@if ((List<Item>)ViewData["Items"] != null)
		{
			<div style="overflow: auto;">
				<table class="table table-sm">
					<thead>
						<tr>
							<th scope="col">Выбрать</th>
							<th scope="col">Название айтема</th>
							<th scope="col">Автор</th>
							<th scope="col">Содержание</th>
							<th scope="col">Дата создания</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in ViewData["Items"] as List<Item>)
						{
							<tr>
								<td>
									<input type="checkbox" name="selectedItems" value="@item.Id"
								   @(Model.Items.Contains(item) ? "checked=\"checked\"" : "") />
								</td>
								<td>@item.Name</td>
								<td>@item.Author</td>
								<td>@item.Content</td>
								<td>@item.Date</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		}
		else
		{
			<p>Нет доступных айтемов <a class="link-info" href="/Profile/CreateItem">Создать</a></p>
		}

		<div class="d-flex justify-content-center">
			<button class="btn btn-outline-primary ml-2">Изменить</button>
			<a class="btn btn-outline-danger ml-3" href="/Profile/DeleteCollection/@Model.Id">Удалить</a>
		</div>
		
	</form>
</div>

@section Scripts {
	<script src="~/js/editCollection.js"></script>
}

